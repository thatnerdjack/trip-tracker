(this["webpackJsonptrip-tracker"]=this["webpackJsonptrip-tracker"]||[]).push([[0],{129:function(e,t,a){"use strict";a.r(t);a(83),a(84);var n=a(0),l=a.n(n),r=a(21),i=a.n(r),s=a(37),o=a(30),h=a(138),c=a(8),d=a(9),u=a(11),m=a(10),p=a(5),b=a(12),g=a(131),E=a(132),f=a(76),C=a(133),w=a(140),y=a(16),O=a.n(y),v=a(24),S=a(136),j=a(135),k=a(15),T=a.n(k);function L(e,t,a){return{type:"SET_USER",payload:{id:e,name:t,email:a}}}var x=a(25),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:""},a.handleEmailChange=a.handleEmailChange.bind(Object(p.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),T.a.post("/api/users/login",{email:this.state.email,password:this.state.password}).then(function(e){var t=e.data.token.substring(7),a=t.substring(t.indexOf(".")+1),n=a.substring(0,a.indexOf(".")),l=JSON.parse(atob(n));console.log(l),this.props.setUser(l.id,l.name,l.email),sessionStorage.setItem("jwtToken",e.data.token.substring(7)),this.props.handleClose()}.bind(this)).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(S.a,{show:this.props.show,onHide:this.props.handleClose},l.a.createElement("h1",null,"Login"),l.a.createElement(j.a,null,l.a.createElement(j.a.Group,{controlId:"formLoginEmail"},l.a.createElement(j.a.Label,null,"Email address"),l.a.createElement(j.a.Control,{type:"email",placeholder:"Enter email",onChange:this.handleEmailChange})),l.a.createElement(j.a.Group,{controlId:"formLoginPassword"},l.a.createElement(j.a.Label,null,"Password"),l.a.createElement(j.a.Control,{type:"password",placeholder:"Password",onChange:this.handlePasswordChange})),l.a.createElement(w.a,{variant:"primary",type:"submit",className:"mt-3",onClick:this.handleSubmit},"Login"))))}}]),t}(l.a.Component),A={setUser:L},P=Object(x.b)(null,A)(N),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={name:"",email:"",password:"",confPass:""},a.handleNameChange=a.handleNameChange.bind(Object(p.a)(a)),a.handleEmailChange=a.handleEmailChange.bind(Object(p.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(p.a)(a)),a.handleConfPasswordChange=a.handleConfPasswordChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleConfPasswordChange",value:function(e){this.setState({confPass:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),T.a.post("/api/users/register",{name:this.state.name,email:this.state.email,password:this.state.password,password2:this.state.confPass}).then(function(e){T.a.post("/api/users/login",{email:this.state.email,password:this.state.password}).then(function(e){var t=e.data.token.substring(7),a=t.substring(t.indexOf(".")+1),n=a.substring(0,a.indexOf(".")),l=JSON.parse(atob(n));console.log(l),this.props.setUser(l.id,l.name,l.email),this.props.handleClose()}.bind(this)).catch((function(e){console.log(e)}))}.bind(this)).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(S.a,{show:this.props.show,onHide:this.props.handleClose},l.a.createElement("h1",null,"Register"),l.a.createElement(j.a,null,l.a.createElement(j.a.Group,{controlId:"formLoginName"},l.a.createElement(j.a.Label,null,"Name"),l.a.createElement(j.a.Control,{type:"text",placeholder:"Enter name",onChange:this.handleNameChange})),l.a.createElement(j.a.Group,{controlId:"formLoginEmail"},l.a.createElement(j.a.Label,null,"Email address"),l.a.createElement(j.a.Control,{type:"email",placeholder:"Enter email",onChange:this.handleEmailChange})),l.a.createElement(j.a.Group,{controlId:"formLoginPassword"},l.a.createElement(j.a.Label,null,"Password"),l.a.createElement(j.a.Control,{type:"password",placeholder:"Password",onChange:this.handlePasswordChange})),l.a.createElement(j.a.Group,{controlId:"formLoginPassword"},l.a.createElement(j.a.Label,null,"Confirm Password"),l.a.createElement(j.a.Control,{type:"password",placeholder:"Confirm Password",onChange:this.handleConfPasswordChange})),l.a.createElement(w.a,{variant:"primary",type:"submit",className:"mt-3",onClick:this.handleSubmit},"Register"))))}}]),t}(l.a.Component),D={setUser:L},M=Object(x.b)(null,D)(I),R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={loginShow:!1,registerShow:!1},a.handleLoginClose=a.handleLoginClose.bind(Object(p.a)(a)),a.handleLoginShow=a.handleLoginShow.bind(Object(p.a)(a)),a.handleRegisterClose=a.handleRegisterClose.bind(Object(p.a)(a)),a.handleRegisterShow=a.handleRegisterShow.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleLoginClose",value:function(){this.setState({loginShow:!1})}},{key:"handleLoginShow",value:function(){this.setState({loginShow:!0})}},{key:"handleRegisterClose",value:function(){this.setState({registerShow:!1})}},{key:"handleRegisterShow",value:function(){this.setState({registerShow:!0})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement(E.a,{className:"justify-content-md-center"},l.a.createElement(f.a,{className:"p-5"},l.a.createElement(C.a,{className:"text-center"},l.a.createElement("h1",{className:"pb-3"},"Trip Tracker"),l.a.createElement("h3",{className:"pb-3 my-text-opacity"},"Please login"),l.a.createElement(w.a,{onClick:this.handleLoginShow,className:"m-3 my-button"},"Login"),l.a.createElement(w.a,{onClick:this.handleRegisterShow,className:"m-3 my-reg-button"},"Register"))))),l.a.createElement(P,{show:this.state.loginShow,handleClose:this.handleLoginClose}),l.a.createElement(M,{show:this.state.registerShow,handleClose:this.handleRegisterClose}))}}]),t}(l.a.Component),G=a(134),B=a(139),U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={tripName:"",tripLength:0,dailyBudget:0},a.handleEmailChange=a.handleTripNameChange.bind(Object(p.a)(a)),a.handleTripNameChange=a.handleTripNameChange.bind(Object(p.a)(a)),a.handleTripLengthChange=a.handleTripLengthChange.bind(Object(p.a)(a)),a.handleTripDailyBudgetChange=a.handleTripDailyBudgetChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleTripNameChange",value:function(e){this.setState({tripName:e.target.value})}},{key:"handleTripLengthChange",value:function(e){this.setState({tripLength:e.target.value})}},{key:"handleTripDailyBudgetChange",value:function(e){this.setState({dailyBudget:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),T.a.put("/api/trips/",{tripName:this.state.tripName,tripLength:this.state.tripLength,dailyBudget:this.state.dailyBudget,tripOwner:this.props.userId}).then(function(e){console.log("added stuff"),this.props.handleClose()}.bind(this));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement(S.a,{show:this.props.show,onHide:this.props.handleClose},l.a.createElement("h1",null,"Add Trip"),l.a.createElement(j.a,null,l.a.createElement(j.a.Group,{controlId:"formAddTripTitle"},l.a.createElement(j.a.Label,null,"Type in the name of the new trip!"),l.a.createElement(j.a.Control,{type:"text",placeholder:"Enter Trip Name",onChange:this.handleTripNameChange})),l.a.createElement(j.a.Group,{controlId:"formAddTripLength"},l.a.createElement(j.a.Label,null,"How long is your trip?"),l.a.createElement(j.a.Control,{type:"text",placeholder:"Enter Trip Length (integers only)",onChange:this.handleTripLengthChange})),l.a.createElement(j.a.Group,{controlId:"formAddTripDailyBudget"},l.a.createElement(j.a.Label,null,"How much are you budgeting per day? (number only, no dollar sign"),l.a.createElement(j.a.Control,{type:"text",placeholder:"Enter daily budget (no dollar sign)",onChange:this.handleTripDailyBudgetChange})),l.a.createElement(w.a,{type:"submit",onClick:this.handleSubmit},"Submit")))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={cards:[],showAddTrip:!1},a.handleShow=a.handleShow.bind(Object(p.a)(a)),a.handleClose=a.handleClose.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;console.log("we're getting shit",this.props.userID),T.a.get("/api/trips/user/"+this.props.userID).then((function(t){e.setState({cards:t.data}),console.log(e.state)})).catch((function(e){console.log(e)}))}},{key:"handleShow",value:function(){this.setState({showAddTrip:!0})}},{key:"handleClose",value:function(){this.setState({showAddTrip:!1}),this.UNSAFE_componentWillMount()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h2",{className:"text-center pt-2"},"Your Trips"),l.a.createElement(w.a,{className:"ml-3 mr-3",onClick:this.handleShow},"Add Trip"),l.a.createElement(G.a,{className:"p-5"},this.state.cards.map((function(e,t){return l.a.createElement(B.a,{key:e._id,bg:"light",text:"dark"},l.a.createElement(B.a.Header,null,e.tripName),l.a.createElement(B.a.Text,{className:"p-3"},l.a.createElement("p",null,"Trip Length: ",e.tripLength),l.a.createElement("p",null,"Remaining Left: ",e.totalLeft)),l.a.createElement(s.b,{to:"/trip/"+e._id},l.a.createElement(w.a,{className:"m-3"},"Go into trip")))}))),l.a.createElement(U,{show:this.state.showAddTrip,handleClose:this.handleClose,userId:this.props.userID}))}}]),t}(n.Component),H=Object(x.b)((function(e){return{userID:e.user.user.id}}))(_),F=a(137),W=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={title:"",amount:0},a.handleTitleChange=a.handleTitleChange.bind(Object(p.a)(a)),a.handleAmountChange=a.handleAmountChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleAmountChange",value:function(e){this.setState({amount:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("entered"),console.log(this.props.tripId,this.props.dayId,this.state.amount,this.state.title),t.preventDefault(),T.a.post("/api/trips/expense",{tripId:this.props.tripId,dayId:this.props.dayId,amount:this.state.amount,expenseTitle:this.state.title}).then(function(e){console.log("YEEEET"),this.props.handleClose()}.bind(this)).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement(S.a,{show:this.props.show},l.a.createElement("h1",null,"Add Expense"),l.a.createElement(j.a,null,l.a.createElement(j.a.Group,{controlId:"formAddExpenseTitle"},l.a.createElement(j.a.Label,null,"What's the expense?"),l.a.createElement(j.a.Control,{type:"text",placeholder:"Enter text",onChange:this.handleTitleChange})),l.a.createElement(j.a.Group,{controlId:"formAddExpenseAmount"},l.a.createElement(j.a.Label,null,"How much?"),l.a.createElement(j.a.Control,{type:"text",placeholder:"Enter amount (number only, no $)",onChange:this.handleAmountChange})),l.a.createElement(w.a,{type:"submit",onClick:this.handleSubmit},"Submit")))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={email:""},a.handleEmailChange=a.handleEmailChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),T.a.post("/api/trips/addmember",{email:btoa(this.state.email),tripId:this.props.tripId}).then(function(e){console.log("added stuff"),this.props.handleClose()}.bind(this));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement(S.a,{show:this.props.show},l.a.createElement("h1",null,"Add Trip Member"),l.a.createElement(j.a,null,l.a.createElement(j.a.Group,{controlId:"formAddExpenseTitle"},l.a.createElement(j.a.Label,null,"Type in the email of the new trip member?"),l.a.createElement(j.a.Control,{type:"email",placeholder:"Enter email",onChange:this.handleEmailChange})),l.a.createElement(w.a,{type:"submit",onClick:this.handleSubmit},"Submit")))}}]),t}(n.Component),Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={trip:null,fetched:!1,addExpenseShow:!1,addTripMemberShow:!1},a.handleAddExpenseClose=a.handleAddExpenseClose.bind(Object(p.a)(a)),a.handleAddExpenseShow=a.handleAddExpenseShow.bind(Object(p.a)(a)),a.handleAddTripMemberClose=a.handleAddTripMemberClose.bind(Object(p.a)(a)),a.handleAddTripMemberShow=a.handleAddTripMemberShow.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;T.a.get("/api/trips/"+this.props.location.pathname.replace("/trip/","")).then((function(t){e.setState({trip:t.data,fetched:!0,day:null})})).catch((function(e){console.log(e)}))}},{key:"handleAddExpenseClose",value:function(){this.setState({addExpenseShow:!1}),this.UNSAFE_componentWillMount()}},{key:"handleAddExpenseShow",value:function(e){this.setState({addExpenseShow:!0,day:e})}},{key:"handleAddTripMemberClose",value:function(){this.setState({addTripMemberShow:!1})}},{key:"handleAddTripMemberShow",value:function(){this.setState({addTripMemberShow:!0})}},{key:"render",value:function(){var e=this;return this.state.fetched?l.a.createElement("div",null,l.a.createElement(B.a,null,l.a.createElement(B.a.Header,null,this.state.trip.tripName,l.a.createElement(w.a,{disabled:!0,variant:"danger",className:"float-right ml-3"},"Delete Trip"),l.a.createElement(w.a,{disabled:!0,className:"float-right",onClick:this.handleAddTripMemberShow},"Add a Friend")),this.state.trip.days?l.a.createElement(F.a,null,this.state.trip.days.map((function(t,a){return l.a.createElement(F.a.Item,{key:t._id},"Day Number ",t.dayNum," \u2013 $",t.amountLeft," left",l.a.createElement(w.a,{disabled:!0,className:"float-right ml-3"},"View Details"),l.a.createElement(w.a,{onClick:function(){e.handleAddExpenseShow(t._id)},className:"float-right"},"Add Expense"))}))):l.a.createElement("p",null,"ERROR")),l.a.createElement(W,{show:this.state.addExpenseShow,tripId:this.state.trip._id,dayId:this.state.day,handleClose:this.handleAddExpenseClose}),l.a.createElement(J,{show:this.state.addTripMemberShow,tripId:this.state.trip,handleClose:this.handleAddTripMemberClose})):l.a.createElement("p",null,"fetching...")}}]),t}(n.Component);n.Component;var $=Object(x.b)((function(e){return{name:e.user.user.name,id:e.user.user.id}}))((function(e){return l.a.createElement(s.a,null,l.a.createElement(h.a,{bg:"dark",variant:"dark"},l.a.createElement(h.a.Brand,{href:"/"},"Trip Tracker"),l.a.createElement(h.a.Collapse,{className:"justify-content-end"},l.a.createElement(h.a.Text,null,e.name?l.a.createElement("div",null,"Signed in as: ",l.a.createElement("a",{href:"#login"},e.name)):l.a.createElement("div",null,"Please log in to continue")))),l.a.createElement(o.c,null,l.a.createElement(o.a,{exact:!0,path:"/"},e.id?l.a.createElement(H,null):l.a.createElement(R,null)),l.a.createElement(o.a,{exact:!0,route:"/trip/:tripId/",component:Y})))})),V=a(32),q=a(78),z=a(79),K=a(80),Q=a(81);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Z=Object(V.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{id:null,name:null,email:null}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach((function(t){Object(Q.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{user:{id:t.payload.id,name:t.payload.name,email:t.payload.email}});case"LOGOUT":var a=e;return a.user.id=null,a.user.name=null,a.user.email=null,a}return e}}),ee=Object(V.a)(Object(K.a)(),z.a,Object(q.createLogger)()),te=Object(V.d)(Z,ee);i.a.render(l.a.createElement(x.a,{store:te},l.a.createElement($,null)),document.getElementById("root"))},82:function(e,t,a){e.exports=a(129)},84:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.ff79216d.chunk.js.map