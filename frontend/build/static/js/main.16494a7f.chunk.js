(this["webpackJsonptrip-tracker"]=this["webpackJsonptrip-tracker"]||[]).push([[0],{128:function(e,t,a){"use strict";a.r(t);a(83);var n=a(0),l=a.n(n),r=a(21),s=a.n(r),i=a(37),o=a(29),c=a(137),h=a(10),d=a(11),u=a(14),m=a(12),p=a(5),b=a(13),E=a(130),g=a(131),f=a(76),w=a(132),C=a(139),O=a(19),v=a.n(O),y=a(28),j=a(135),S=a(134),k=a(16),x=a.n(k);function T(e,t,a){return{type:"SET_USER",payload:{id:e,name:t,email:a}}}var P=a(24),L=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:""},a.handleEmailChange=a.handleEmailChange.bind(Object(p.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),x.a.post("http://localhost:5000/api/users/login",{email:this.state.email,password:this.state.password}).then(function(e){var t=e.data.token.substring(7),a=t.substring(t.indexOf(".")+1),n=a.substring(0,a.indexOf(".")),l=JSON.parse(atob(n));console.log(l),this.props.setUser(l.id,l.name,l.email),sessionStorage.setItem("jwtToken",e.data.token.substring(7)),this.props.handleClose()}.bind(this)).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(j.a,{show:this.props.show},l.a.createElement("h1",null,"Login"),l.a.createElement(S.a,null,l.a.createElement(S.a.Group,{controlId:"formLoginEmail"},l.a.createElement(S.a.Label,null,"Email address"),l.a.createElement(S.a.Control,{type:"email",placeholder:"Enter email",onChange:this.handleEmailChange})),l.a.createElement(S.a.Group,{controlId:"formLoginPassword"},l.a.createElement(S.a.Label,null,"Password"),l.a.createElement(S.a.Control,{type:"password",placeholder:"Password",onChange:this.handlePasswordChange})),l.a.createElement(C.a,{variant:"primary",type:"submit",className:"mt-3",onClick:this.handleSubmit},"Login"))))}}]),t}(l.a.Component),A={setUser:T},N=Object(P.b)(null,A)(L),I=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={name:"",email:"",password:"",confPass:""},a.handleNameChange=a.handleNameChange.bind(Object(p.a)(a)),a.handleEmailChange=a.handleEmailChange.bind(Object(p.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(p.a)(a)),a.handleConfPasswordChange=a.handleConfPasswordChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleConfPasswordChange",value:function(e){this.setState({confPass:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),x.a.post("http://localhost:5000/api/users/register",{name:this.state.name,email:this.state.email,password:this.state.password,password2:this.state.confPass}).then(function(e){x.a.post("http://localhost:5000/api/users/login",{email:this.state.email,password:this.state.password}).then(function(e){var t=e.data.token.substring(7),a=t.substring(t.indexOf(".")+1),n=a.substring(0,a.indexOf(".")),l=JSON.parse(atob(n));console.log(l),this.props.setUser(l.id,l.name,l.email),this.props.handleClose()}.bind(this)).catch((function(e){console.log(e)}))}.bind(this)).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(j.a,{show:this.props.show},l.a.createElement("h1",null,"Register"),l.a.createElement(S.a,null,l.a.createElement(S.a.Group,{controlId:"formLoginEmail"},l.a.createElement(S.a.Label,null,"Email address"),l.a.createElement(S.a.Control,{type:"text",placeholder:"Enter name3",onChange:this.handleNameChange})),l.a.createElement(S.a.Group,{controlId:"formLoginEmail"},l.a.createElement(S.a.Label,null,"Email address"),l.a.createElement(S.a.Control,{type:"email",placeholder:"Enter email",onChange:this.handleEmailChange})),l.a.createElement(S.a.Group,{controlId:"formLoginPassword"},l.a.createElement(S.a.Label,null,"Password"),l.a.createElement(S.a.Control,{type:"password",placeholder:"Password",onChange:this.handlePasswordChange})),l.a.createElement(S.a.Group,{controlId:"formLoginPassword"},l.a.createElement(S.a.Label,null,"Confirm Password"),l.a.createElement(S.a.Control,{type:"password",placeholder:"Confirm Password",onChange:this.handleConfPasswordChange})),l.a.createElement(C.a,{variant:"primary",type:"submit",className:"mt-3",onClick:this.handleSubmit},"Register"))))}}]),t}(l.a.Component),R={setUser:T},M=Object(P.b)(null,R)(I),D=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={loginShow:!1,registerShow:!1},a.handleLoginClose=a.handleLoginClose.bind(Object(p.a)(a)),a.handleLoginShow=a.handleLoginShow.bind(Object(p.a)(a)),a.handleRegisterClose=a.handleRegisterClose.bind(Object(p.a)(a)),a.handleRegisterShow=a.handleRegisterShow.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleLoginClose",value:function(){this.setState({loginShow:!1})}},{key:"handleLoginShow",value:function(){this.setState({loginShow:!0})}},{key:"handleRegisterClose",value:function(){this.setState({registerShow:!1})}},{key:"handleRegisterShow",value:function(){this.setState({registerShow:!0})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(E.a,null,l.a.createElement(g.a,{className:"justify-content-md-center"},l.a.createElement(f.a,{className:"p-5"},l.a.createElement(w.a,{className:"text-center"},l.a.createElement("h1",{className:"pb-3"},"Trip Tracker"),l.a.createElement("h3",{className:"pb-3"},"Please login"),l.a.createElement(C.a,{onClick:this.handleLoginShow,className:"m-3"},"Login"),l.a.createElement(C.a,{onClick:this.handleRegisterShow,className:"m-3"},"Register"))))),l.a.createElement(N,{show:this.state.loginShow,handleClose:this.handleLoginClose}),l.a.createElement(M,{show:this.state.registerShow,handleClose:this.handleRegisterClose}))}}]),t}(l.a.Component),G=a(133),U=a(138),_=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={cards:[]},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;console.log("we're getting shit",this.props.userID),x.a.get("http://localhost:5000/api/trips/user/"+this.props.userID).then((function(t){e.setState({cards:t.data}),console.log(e.state)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h2",{className:"text-center pt-2"},"Your Trips"),l.a.createElement(G.a,{className:"p-5"},this.state.cards.map((function(e,t){return l.a.createElement(U.a,{key:e._id,bg:"light",text:"dark"},l.a.createElement(U.a.Header,null,e.tripName),l.a.createElement(U.a.Text,{className:"p-3"},l.a.createElement("p",null,"Trip Length: ",e.tripLength),l.a.createElement("p",null,"Remaining Left: ",e.totalLeft)),l.a.createElement(i.b,{to:"/trip/"+e._id},l.a.createElement(C.a,{className:"m-3"},"Go into trip")))}))))}}]),t}(n.Component),F=Object(P.b)((function(e){return{userID:e.user.user.id}}))(_),J=a(136),W=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={title:"",amount:0},a.handleTitleChange=a.handleTitleChange.bind(Object(p.a)(a)),a.handleAmountChange=a.handleAmountChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleAmountChange",value:function(e){this.setState({amount:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("entered"),console.log(this.props.tripId,this.props.dayId,this.state.amount,this.state.title),t.preventDefault(),x.a.post("http://localhost:5000/api/trips/expense",{tripId:this.props.tripId,dayId:this.props.dayId,amount:this.state.amount,expenseTitle:this.state.title}).then(function(e){console.log("YEEEET"),this.props.handleClose()}.bind(this)).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement(j.a,{show:this.props.show},l.a.createElement("h1",null,"Add Expense"),l.a.createElement(S.a,null,l.a.createElement(S.a.Group,{controlId:"formAddExpenseTitle"},l.a.createElement(S.a.Label,null,"What's the expense?"),l.a.createElement(S.a.Control,{type:"text",placeholder:"Enter text",onChange:this.handleTitleChange})),l.a.createElement(S.a.Group,{controlId:"formAddExpenseAmount"},l.a.createElement(S.a.Label,null,"How much?"),l.a.createElement(S.a.Control,{type:"text",placeholder:"Enter amount (number only, no $)",onChange:this.handleAmountChange})),l.a.createElement(C.a,{type:"submit",onClick:this.handleSubmit},"Submit")))}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={email:""},a.handleEmailChange=a.handleEmailChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),x.a.post("http://localhost:5000/api/trips/addmember",{email:btoa(this.state.email),tripId:this.props.tripId}).then(function(e){console.log("added stuff"),this.props.handleClose()}.bind(this));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement(j.a,{show:this.props.show},l.a.createElement("h1",null,"Add Trip Member"),l.a.createElement(S.a,null,l.a.createElement(S.a.Group,{controlId:"formAddExpenseTitle"},l.a.createElement(S.a.Label,null,"Type in the email of the new trip member?"),l.a.createElement(S.a.Control,{type:"email",placeholder:"Enter email",onChange:this.handleEmailChange})),l.a.createElement(C.a,{type:"submit",onClick:this.handleSubmit},"Submit")))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={trip:null,fetched:!1,addExpenseShow:!1,addTripMemberShow:!1},a.handleAddExpenseClose=a.handleAddExpenseClose.bind(Object(p.a)(a)),a.handleAddExpenseShow=a.handleAddExpenseShow.bind(Object(p.a)(a)),a.handleAddTripMemberClose=a.handleAddTripMemberClose.bind(Object(p.a)(a)),a.handleAddTripMemberShow=a.handleAddTripMemberShow.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;x.a.get("http://localhost:5000/api/trips/"+this.props.location.pathname.replace("/trip/","")).then((function(t){e.setState({trip:t.data,fetched:!0,day:null})})).catch((function(e){console.log(e)}))}},{key:"handleAddExpenseClose",value:function(){this.setState({addExpenseShow:!1}),this.UNSAFE_componentWillMount()}},{key:"handleAddExpenseShow",value:function(e){this.setState({addExpenseShow:!0,day:e})}},{key:"handleAddTripMemberClose",value:function(){this.setState({addTripMemberShow:!1})}},{key:"handleAddTripMemberShow",value:function(){this.setState({addTripMemberShow:!0})}},{key:"render",value:function(){var e=this;return this.state.fetched?l.a.createElement("div",null,l.a.createElement(U.a,null,l.a.createElement(U.a.Header,null,this.state.trip.tripName,l.a.createElement(C.a,{disabled:!0,variant:"danger",className:"float-right ml-3"},"Delete Trip"),l.a.createElement(C.a,{disabled:!0,className:"float-right",onClick:this.handleAddTripMemberShow},"Add a Friend")),this.state.trip.days?l.a.createElement(J.a,null,this.state.trip.days.map((function(t,a){return l.a.createElement(J.a.Item,{key:t._id},"Day Number ",t.dayNum," \u2013 $",t.amountLeft," left",l.a.createElement(C.a,{disabled:!0,className:"float-right ml-3"},"View Details"),l.a.createElement(C.a,{onClick:function(){e.handleAddExpenseShow(t._id)},className:"float-right"},"Add Expense"))}))):l.a.createElement("p",null,"ERROR")),l.a.createElement(W,{show:this.state.addExpenseShow,tripId:this.state.trip._id,dayId:this.state.day,handleClose:this.handleAddExpenseClose}),l.a.createElement(H,{show:this.state.addTripMemberShow,tripId:this.state.trip,handleClose:this.handleAddTripMemberClose})):l.a.createElement("p",null,"fetching...")}}]),t}(n.Component);n.Component;var Y=Object(P.b)((function(e){return{name:e.user.user.name,id:e.user.user.id}}))((function(e){return l.a.createElement(i.a,null,l.a.createElement(c.a,{bg:"dark",variant:"dark"},l.a.createElement(c.a.Brand,{href:"/"},"Trip Tracker"),l.a.createElement(c.a.Collapse,{className:"justify-content-end"},l.a.createElement(c.a.Text,null,e.name?l.a.createElement("div",null,"Signed in as: ",l.a.createElement("a",{href:"#login"},e.name)):l.a.createElement("div",null,"Please log in to continue")))),l.a.createElement(o.c,null,l.a.createElement(o.a,{exact:!0,path:"/"},e.id?l.a.createElement(F,null):l.a.createElement(D,null)),l.a.createElement(o.a,{exact:!0,route:"/trip/:tripId/",component:B})))})),$=a(32),V=a(78),q=a(79),z=a(80),K=a(81);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var X=Object($.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{id:null,name:null,email:null}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach((function(t){Object(K.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{user:{id:t.payload.id,name:t.payload.name,email:t.payload.email}});case"LOGOUT":var a=e;return a.user.id=null,a.user.name=null,a.user.email=null,a}return e}}),Z=Object($.a)(Object(z.a)(),q.a,Object(V.createLogger)()),ee=Object($.d)(X,Z);s.a.render(l.a.createElement(P.a,{store:ee},l.a.createElement(Y,null)),document.getElementById("root"))},82:function(e,t,a){e.exports=a(128)}},[[82,1,2]]]);
//# sourceMappingURL=main.16494a7f.chunk.js.map